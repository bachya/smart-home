---
ambient_station:
  api_key: !secret pws_api_key
  app_key: !secret pws_app_key

automation:
  - alias: "Backyard light switch via kitchen patio light (off)"
    trigger:
      platform: event
      event_type: zwave.node_event
      event_data:
        entity_id: zwave.kitchen_patio_light
        basic_level: 0
    action:
      service: switch.turn_off
      data:
        entity_id: switch.backyard_lights

  - alias: "Backyard light switch via kitchen patio light (on)"
    trigger:
      platform: event
      event_type: zwave.node_event
      event_data:
        entity_id: zwave.kitchen_patio_light
        basic_level: 255
    action:
      service: switch.turn_on
      data:
        entity_id: switch.backyard_lights

  - alias: "Turn off backyard lights at 11pm on weekend/holiday night"
    trigger:
      platform: time
      at: "23:00:00"
    condition:
      condition: state
      entity_id: binary_sensor.workday_tomorrow
      state: "off"
    action:
      service: switch.turn_off
      data:
        entity_id: switch.backyard_lights

  - alias: "Turn off backyard lights at 9:30pm on work night"
    trigger:
      platform: time
      at: "21:30:00"
    condition:
      condition: state
      entity_id: binary_sensor.workday_tomorrow
      state: "on"
    action:
      service: switch.turn_off
      data:
        entity_id: switch.backyard_lights

  - alias: "Turn on backyard lights at sunset"
    trigger:
      platform: sun
      event: sunset
    action:
      service: switch.turn_on
      data:
        entity_id: switch.backyard_lights

  - alias: "Turn off patio lights at 11pm"
    trigger:
      platform: time
      at: "23:00:00"
    action:
      service: switch.turn_off
      data:
        entity_id: group.patio_lights

  - alias: "Turn on backyard lights at sunset"
    trigger:
      platform: sun
      event: sunset
    action:
      service: switch.turn_on
      data:
        entity_id: group.patio_lights

group:
  outdoor_lights:
    entities:
      - switch.backyard_lights
      - switch.front_patio_light
      - switch.kitchen_patio_light

  patio_lights:
    entities:
      - switch.front_patio_light
      - switch.kitchen_patio_light

input_boolean:
  lightning_detected_automation:
    icon: mdi:flash
    name: Notify when lightning detected
  outdoor_lights_schedule_automation:
    icon: mdi:lightbulb
    name: Automatic schedule
