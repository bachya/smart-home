---
adjust_climate_on_proximity_automation:
  module: climate
  class: AdjustOnProximity
  dependencies:
    - climate_manager
    - presence_manager

climate_manager:
  module: climate
  class: ClimateManager
  entity_ids:
    humidity_sensor: sensor.average_indoor_humidity
    indoor_temperature_sensor: sensor.average_indoor_temperature
    outdoor_brightness_sensor: sensor.side_yard_solar_rad
    outdoor_brightness_percent_sensor: sensor.filtered_outdoor_brightness
    outdoor_temperature_sensor: sensor.dark_sky_temperature
    thermostat: climate.thermostat
  properties:
    eco_delta_degrees: 3
    eco_high_threshold: 75
    eco_low_threshold: 60
    outdoor_high_threshold: 85
    outdoor_low_threshold: 40

lightning_detected_automation:
  module: climate
  class: LightningDetected
  properties:
    notification_window_seconds: 600

notify_bad_aqi_automation:
  module: climate
  class: NotifyBadAqi
  dependencies:
    - climate_manager
    - vacation_mode
  entity_ids:
    aqi: sensor.us_air_quality_index
  properties:
    aqi_threshold: 100
  state_changes:
    - disable:
        event: MODE_CHANGE
        event_data:
          name: vacation_mode
          state: "on"
      enable:
        event: MODE_CHANGE
        event_data:
          name: vacation_mode
          state: "off"
    - disable:
        event: MODE_CHANGE
        event_data:
          name: blackout_mode
          state: "on"
      enable:
        event: MODE_CHANGE
        event_data:
          name: blackout_mode
          state: "off"
    - disable:
        event: PROXIMITY_CHANGE
        event_data:
          old: home
      enable:
        event: PROXIMITY_CHANGE
        event_data:
          new: home
