---
wolfie:
  module: robot_vacuum
  class: Vacuum
  dependencies:
    - security_manager
  entity_ids:
    bin_state: input_select.wolfie_bin_status
    status: sensor.vacuum_status
    vacuum: vacuum.xiaomi_vacuum_cleaner

wolfie_notify_when_consumable_low_automation:
  module: robot_vacuum
  class: MonitorConsumables
  dependencies:
    - presence_manager
    - wolfie
  app: wolfie
  properties:
    consumable_threshold: 5
    consumables:
      - filter_left
      - main_brush_left
      - sensor_dirty_left
      - side_brush_left
  state_changes:
    - disable:
        event: MODE_CHANGE
        event_data:
          name: blackout_mode
          state: "on"
      enable:
        event: MODE_CHANGE
        event_data:
          name: blackout_mode
          state: "off"
    - disable:
        event: MODE_CHANGE
        event_data:
          name: vacation_mode
          state: "on"
      enable:
        event: MODE_CHANGE
        event_data:
          name: vacation_mode
          state: "off"
    - disable:
        event: PROXIMITY_CHANGE
        event_data:
          old: home
      enable:
        event: PROXIMITY_CHANGE
        event_data:
          new: home

wolfie_notify_when_cycle_complete_automation:
  module: robot_vacuum
  class: NotifyWhenRunComplete
  dependencies:
    - presence_manager
    - wolfie
  app: wolfie
  properties:
    notification_interval: 10800
  state_changes:
    - disable:
        event: MODE_CHANGE
        event_data:
          name: blackout_mode
          state: "on"
      enable:
        event: MODE_CHANGE
        event_data:
          name: blackout_mode
          state: "off"
    - disable:
        event: MODE_CHANGE
        event_data:
          name: vacation_mode
          state: "on"
      enable:
        event: MODE_CHANGE
        event_data:
          name: vacation_mode
          state: "off"
    - disable:
        event: PROXIMITY_CHANGE
        event_data:
          old: home
      enable:
        event: PROXIMITY_CHANGE
        event_data:
          new: home

# wolfie_notify_when_stuck_automation:
#   module: robot_vacuum
#   class: NotifyWhenStuck
#   dependencies:
#     - presence_manager
#     - wolfie
#   app: wolfie
#   properties:
#     notification_interval: 300
#   state_changes:
#     - disable:
#         event: MODE_CHANGE
#         event_data:
#           name: blackout_mode
#           state: "on"
#       enable:
#         event: MODE_CHANGE
#         event_data:
#           name: blackout_mode
#           state: "off"
#     - disable:
#         event: MODE_CHANGE
#         event_data:
#           name: vacation_mode
#           state: "on"
#       enable:
#         event: MODE_CHANGE
#         event_data:
#           name: vacation_mode
#           state: "off"
#     - disable:
#         event: PROXIMITY_CHANGE
#         event_data:
#           old: home
#       enable:
#         event: PROXIMITY_CHANGE
#         event_data:
#           new: home

wolfie_scheduled_cycle_automation:
  module: robot_vacuum
  class: ScheduledCycle
  dependencies:
    - presence_manager
    - security_manager
    - wolfie
  app: wolfie
  properties:
    ios_emptied_key: WOLFIE_EMPTIED
    schedule_switches:
      - input_boolean.vacuum_schedule_monday
      - input_boolean.vacuum_schedule_tuesday
      - input_boolean.vacuum_schedule_wednesday
      - input_boolean.vacuum_schedule_thursday
      - input_boolean.vacuum_schedule_friday
      - input_boolean.vacuum_schedule_saturday
      - input_boolean.vacuum_schedule_sunday
    schedule_time: "10:00:00"
  state_changes:
    - disable:
        event: MODE_CHANGE
        event_data:
          name: blackout_mode
          state: "on"
      enable:
        event: MODE_CHANGE
        event_data:
          name: blackout_mode
          state: "off"
    - disable:
        event: MODE_CHANGE
        event_data:
          name: guest_mode
          state: "on"
      enable:
        event: MODE_CHANGE
        event_data:
          name: guest_mode
          state: "off"
    - disable:
        event: MODE_CHANGE
        event_data:
          name: vacation_mode
          state: "on"
      enable:
        event: MODE_CHANGE
        event_data:
          name: vacation_mode
          state: "off"
